<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paystack Payment</title>
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .form-group { margin-bottom: 15px; }
    label { display: block; margin-bottom: 5px; }
    input { width: 100%; padding: 8px; }
    button { padding: 10px 15px; background: green; color: white; border: none; cursor: pointer; }
    button:hover { background: darkgreen; }
  </style>
</head>
<body>
  <h2>Pay with Paystack</h2>
  <form id="paymentForm">
    <div class="form-group">
      <label for="email-address">Email Address</label>
      <input type="email" id="email-address" required />
    </div>
    <div class="form-group">
      <label for="amount">Amount (NGN)</label>
      <input type="number" id="amount" required />
    </div>
    <div class="form-group">
      <label for="first-name">First Name</label>
      <input type="text" id="first-name" />
    </div>
    <div class="form-group">
      <label for="last-name">Last Name</label>
      <input type="text" id="last-name" />
    </div>
    <div class="form-submit">
      <button type="submit">Pay</button>
    </div>
  </form>

  <script>
    const paymentForm = document.getElementById('paymentForm');
    paymentForm.addEventListener("submit", payWithPaystack, false);

    function payWithPaystack(e) {
      e.preventDefault();

      const email = document.getElementById("email-address").value;
      const amount = document.getElementById("amount").value;

      if (!email || !amount || amount <= 0) {
        alert("Please enter a valid email and amount");
        return;
      }

      let handler = PaystackPop.setup({
        key: 'pk_test_971ff5197016ee71aa8ccc2fc1d02c969501ac78', // Replace with your own public key
        email: email,
        amount: amount * 100, // Paystack uses kobo (amount * 100)
        currency: 'NGN',
        ref: ''+Math.floor((Math.random() * 1000000000) + 1), // Generate random reference
        onClose: function(){
          alert('Payment window closed.');
        },
        callback: function(response){
          alert('Payment complete! Reference: ' + response.reference);
          // You can also send response.reference to your server for verification
        }
      });

      handler.openIframe();
    }
  </script>
</body>
</html>
